<!DOCTYPE html>
<html lang="en">
  <head>
    <title>conway's game of life</title>
    <script type="text/javascript" src="usual.js"></script>
    <script type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="life.css">
  </head>
  <body>
    <div id="whole">
    </div>
    <div id="generation">
      Generation: 0
    </div>
    <div id="button">
      <input type="button" value="start" class="btn" onclick="startit()">
      <input type="button" value="stop" class="btn" onclick="stopit()">
      <input type="button" value="clear" class="btn" onclick="clearit()">
    </div>
    <div id="firefox_rec">
      <a href="http://www.mozilla.org/en-US/firefox/new/"><img style="float:left" id="img_firefox" src="img/firefox.jpg" alt="FIREFOX"></a>
      <p style="float:left; margin:3px; margin-left:7px">Firefox Makes</p>
      <p style="float:left; margin:3px; margin-left:7px">It Run Faster</p>
    </div>
    <div id="copyright">
      <h5>Copyright Kaiyu Zheng 2014</h5>
    </div>
    <script type="text/javascript" src="life.js"></script>
    <script type="text/javascript">
     // concluded from making this:
     // always plan first
     // calm down and have a rest when stuck is better than staying and get stuck
     // debug using response

     var canvw = 945;
     var canvh = 525;
     var size = 15;

     var gridList = createCanvas(gridList, canvw, canvh, size);

     var numrow = canvh / size;
     var numcol = canvw / size;
     var numgrid = numrow * numcol;

     assignAdjacents(gridList, numgrid, numcol, numrow);

     var count = 0;
     var myVar;
     function startit() {
       myVar = setInterval(function() {
	 var generation = document.getElementById("generation").innerHTML = "Generation: " + count;
	 var nextgen = copy(gridList, false);
	 for (var i = 0; i < nextgen.length; i++) {
	   for (var j = 0; j < nextgen[i].length; j++) {
	     if (nextgen[i][j] instanceof Grid) {
	       nextgen[i][j].decideLife(gridList[i][j].decideState());
	     } else {
	       alert("I am not even a grid");
	     }
	   }
	 }
	 refresh(nextgen, numgrid, count);

	 gridList = copy(nextgen, true);
	 count++;
       }, 20);
     }

     function clearit() {
       location.reload();
     }

     function stopit() {
       clearInterval(myVar);
     }

     function refresh(gridList, numgrid, count) {
       var ti = 0;
       var tj = 0;
       for (var k = 0; k < numgrid; k++) {
	 for (var i = 0; i < gridList.length; i++) {
	   for (var j = 0; j < gridList[i].length; j++) {
	     if (!(ti == i && tj == j)) {
	       if (gridList[ti][tj].isadjacentTo(gridList[i][j])) {
		 if (gridList[i][j].live) {
		   gridList[ti][tj].changeAroundGridToLive(gridList[i][j]);
		 } else {
		   gridList[ti][tj].changeAroundGridToDie(gridList[i][j]);
		 }
	       }
	     }
	   }
	 }
	 tj++;
	 if (tj == numcol) {
	   tj = 0;
	   ti++;
	 }
       }
     }
    </script>
  </body>
</html>